<!DOCTYPE html>
<html lang="is">
<head>
<meta charset="utf-8" />
<title>Triis (Þríis) — 3D Triomino Tetris</title>
<style>
body { margin: 0; font-family: sans-serif; background: #eefbe8; }
#hud { position: absolute; left: 10px; top: 10px; z-index: 10; }
#score, #height { background: rgba(255,255,255,0.8); padding: 6px 10px; margin-bottom:6px; border-radius:6px; }
canvas { display:block; margin:0 auto; }
#instructions { position: absolute; right: 10px; top: 10px; background: rgba(255,255,255,0.8); padding:8px; border-radius:6px; max-width:260px; }
code { font-family: monospace; }

#gameover {
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.8);
  color:#fff;
  font-size:2em;
  text-align:center;
  padding-top:25vh;
  z-index:20;
}
#resetBtn {
  padding:10px 20px;
  font-size:1.2rem;
  border:none;
  border-radius:8px;
  cursor:pointer;
  background:#fff;
  color:#333;
  margin-top:20px;
}
#resetBtn:hover {
  background:#f0f0f0;
}

#musicBtn {
  display: inline-block;
  background: rgba(255,255,255,0.8);
  border: none;
  border-radius: 6px;
  padding: 6px 10px;
  cursor: pointer;
  font-size: 1rem;
  margin-top: 6px;
  transition: background 0.2s;
}

#musicBtn:hover {
  background: rgba(255,255,255,1);
}

</style>
</head>

<body>
<div id="hud">
<div id="score">Stig: 0</div>
<div id="height">Núverandi hæð: 0</div>
<button id="musicBtn" onclick="toggleMusic()">Tónlist</button>

<!-- Tónlist -->
<audio id="bgm-calm" src="Tetris Theme.mp3" loop preload="auto"></audio>
<audio id="bgm-intense" src="Tetris Theme - Eurobeat.mp3" loop preload="auto"></audio>


</div>

<div id="instructions">
  <strong>Stýringar</strong>
  <ul>
    <li>Örvar: færa blokk (← ↑ ↓ → eins og venjulegt) — nota öfgar fyrir X/Z (á skjá)</li>
    <li><code>a / z</code>: snúa um X-ás</li>
    <li><code>s / x</code>: snúa um Y-ás</li>
    <li><code>d / c</code>: snúa um Z-ás</li>
    <li><code>Space</code>: sleppa hraðar niður</li>
    <li>HOLD mús: snúa gámnum til að skoða (drag); hjól: zoom</li>
    <li>Blár kassi = Z-ás</li>
    <li>Rauður kassi = Z-ás</li>
  </ul>
  <small>Byrjað er með eina tegund: beina þríblokk (3 kubbar í röð).</small>
</div>

<canvas id="gl-canvas" width="800" height="700"></canvas>
<canvas id="effectCanvas" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; z-index:9999;"></canvas>
<!-- Shaders -->
<script id="vertex-shader" type="x-shader/x-vertex">
    attribute vec4 vPosition;
    uniform mat4 projection;
    uniform mat4 modelview;
    void main() {
    gl_Position = projection * modelview * vPosition;
    }
</script>

<script id="fragment-shader" type="x-shader/x-fragment">
    precision mediump float;
    uniform vec4 fColor;
    void main() {
    gl_FragColor = fColor;
    }
</script>

<script type="text/javascript" src="webgl-utils.js"></script>
<script type="text/javascript" src="initShaders.js"></script>
<script type="text/javascript" src="MV.js"></script>

<script type="text/javascript" src="Triis.js"></script>
<script src="orb.js"></script>

<!-- Game over hlutur  -->
<div id="gameover">
  <div>Game Over!</div>
  <div id="finalScore" style="margin-top:10px; font-size:1rem;"></div>
  <button id="resetBtn">Byrja aftur</button>
</div>

</body>
</html>
